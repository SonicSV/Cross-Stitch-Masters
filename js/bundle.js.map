{"version":3,"sources":["webpack://tapclap/./js/modules/editImg.js","webpack://tapclap/webpack/bootstrap","webpack://tapclap/./js/modules/buttonAdd.js","webpack://tapclap/./js/script.js"],"names":["window","onload","context","document","getElementById","getContext","img","Image","src","localStorage","getItem","ratio","height","width","drawImage","imgData","getImageData","i","data","length","putImageData","console","log","querySelector","addEventListener","preview","file","files","reader","FileReader","onloadend","result","setItem","readAsDataURL","alert","__webpack_module_cache__","__webpack_require__","moduleId","exports","module","__webpack_modules__","input","loadImgBtn","tag","classes","content","node","createElement","classList","add","textContent","element","insertAdjacentElement","click"],"mappings":"+CAIAA,OAAOC,OAAS,WAEf,IACMC,EADSC,SAASC,eAAe,iBAChBC,WAAW,MAE9BC,EAAM,IAAIC,MAIdD,EAAIE,IAAMC,aAAaC,QAAQ,gBAI/B,IAAIC,EAAQL,EAAIM,OAASN,EAAIO,MACzBD,EAAS,IACTC,EAAQD,EAAOD,EAEfE,EAAQ,MACXF,EAAQL,EAAIO,MAAQP,EAAIM,OAExBA,GADAC,EAAQ,KACOF,GAGhBL,EAAIL,OAAS,WACZC,EAAQY,UAAUR,EAAK,EAAG,EAAGO,EAAOD,GAIpC,IAFA,IAAIG,EAAUb,EAAQc,aAAa,EAAG,EAAGH,EAAOD,GAEvCK,EAAI,EAAGA,EAAIF,EAAQG,KAAKC,OAAQF,GAAK,EAC7CF,EAAQG,KAAKD,GAAK,IAAMF,EAAQG,KAAKD,GACrCF,EAAQG,KAAKD,EAAE,GAAK,IAAMF,EAAQG,KAAKD,EAAE,GACzCF,EAAQG,KAAKD,EAAE,GAAK,IAAMF,EAAQG,KAAKD,EAAE,GACzCF,EAAQG,KAAKD,EAAE,GAAK,GAErBf,EAAQkB,aAAaL,EAAS,EAAG,GAEjCM,QAAQC,IAAIP,KAIdZ,SAASoB,cAAc,gBAAgBC,iBAAiB,UAAU,WAC9D,IAAMC,EAAUtB,SAASoB,cAAc,OACjCG,EAAUvB,SAASoB,cAAc,oBAAoBI,MAAM,GAC3DC,EAAU,IAAIC,WAEpBD,EAAOE,UAAY,WACnBL,EAAQjB,IAAMoB,EAAOG,QAGxBH,EAAOJ,iBAAiB,QAAQ,WACzBf,aAAauB,QAAQ,eAAgBJ,EAAOG,WAG5CL,EACJE,EAAOK,cAAcP,GAErBD,EAAQjB,IAAM,GAEjB0B,MAAM,0BC7DHC,EAA2B,GAG/B,SAASC,EAAoBC,GAE5B,GAAGF,EAAyBE,GAC3B,OAAOF,EAAyBE,GAAUC,QAG3C,IAAIC,EAASJ,EAAyBE,GAAY,CAGjDC,QAAS,IAOV,OAHAE,EAAoBH,GAAUE,EAAQA,EAAOD,QAASF,GAG/CG,EAAOD,S,4uBCLLG,EAIAC,E,OAJAD,EAAQtC,SAASoB,cCNjB,gBDOMpB,SAASoB,cCPC,SDUhBmB,EAnBM,SAACC,GAA+B,IAGxB,EAHFC,EAA0B,uDAAhB,GAAIC,EAAY,uCACtCC,EAAO3C,SAAS4C,cAAcJ,GAUpC,OARIC,EAAQzB,SACR,EAAA2B,EAAKE,WAAUC,IAAf,UAAsBL,IAGtBC,IACAC,EAAKI,YAAcL,GAGhBC,EAQYK,CAAQ,SAAU,CAAC,OAAQ,qBAG9CV,EAAMW,sBAAsB,WAAYV,GAgBxCA,EAAWlB,iBAAiB,SAJP,kBAAMiB,EAAMY,W","file":"bundle.js","sourcesContent":["'use strict';\r\n\r\n\r\n\r\nwindow.onload = function() {\r\n\r\n\tconst canvas = document.getElementById(\"drawingCanvas\");\r\n\tconst context = canvas.getContext(\"2d\");\r\n\r\n\tlet img = new Image();\r\n\r\n\t//подгрузка картинки в canvas из LocalStorage\r\n\r\n\timg.src = localStorage.getItem(\"recent-image\");\r\n\r\n\t//приведение картинки к размерам окна холста,\r\n\r\n\tlet ratio = img.height / img.width; //соотношение сторон img\r\n\tlet height = 660;\r\n\tlet width = height/ratio;\r\n\r\n\tif (width > 741) {\r\n\t\tratio = img.width / img.height; //соотношение сторон img\r\n\t\twidth = 760;\r\n\t\theight = width/ratio;\r\n\t}\r\n\r\n\timg.onload = function() {\r\n\t\tcontext.drawImage(img, 0, 0, width, height);\r\n\r\n\t\tlet imgData = context.getImageData(0, 0, width, height)\r\n\r\n\t\tfor (let i = 0; i < imgData.data.length; i += 4) {\r\n\t\t\timgData.data[i] = 255 - imgData.data[i];\r\n\t\t\timgData.data[i+1] = 255 - imgData.data[i+1];\r\n\t\t\timgData.data[i+2] = 255 - imgData.data[i+2];\r\n\t\t\timgData.data[i+3] = 55;\r\n\t\t}\r\n\t\tcontext.putImageData(imgData, 0, 0);\r\n\r\n\t\tconsole.log(imgData)\r\n\t};\r\n};\r\n\r\ndocument.querySelector(\"#myFileInput\").addEventListener(\"change\", function () {\r\n    const preview = document.querySelector('img');\r\n    const file    = document.querySelector('input[type=file]').files[0];\r\n    const reader  = new FileReader();\r\n\r\n    reader.onloadend = function () {\r\n    preview.src = reader.result;\r\n    }\r\n\r\n\treader.addEventListener(\"load\", () => {\r\n        localStorage.setItem(\"recent-image\", reader.result);\r\n    });\r\n\r\n    if (file) {\r\n    reader.readAsDataURL(file);\r\n    } else {\r\n    preview.src = \"\";\r\n    }\r\n\talert('обновите страницу')\r\n});\r\n\r\n\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const element = (tag, classes = [], content) => {\r\n    const node = document.createElement(tag)\r\n\r\n    if (classes.length) {\r\n        node.classList.add(...classes)\r\n    }\r\n\r\n    if (content) {\r\n        node.textContent = content\r\n    }\r\n\r\n    return node\r\n}\r\n\r\nexport function buttonAdd(myInput, myImgSrc) {\r\n    const input = document.querySelector(myInput)\r\n    const img = document.querySelector(myImgSrc)\r\n\r\n    //const removeImgBtn = element('button', ['btn'], 'Поместить на Холст')\r\n    const loadImgBtn = element('button', ['btn'], 'Выберете Картинку')\r\n\r\n    //input.insertAdjacentElement(\"afterend\", removeImgBtn)\r\n    input.insertAdjacentElement(\"afterend\", loadImgBtn)\r\n\r\n    // const triggerImgBtn = () => {\r\n    //     const imgloading = document.querySelector('#myImg')\r\n    //     const get = document.querySelector('#myImg').files[0];\r\n    //    // const readerImg = new FileReader();\r\n\r\n    //     //imgloading.src = readerImg.result;\r\n    //     //readerImg.readAsDataURL(get);\r\n\r\n    //     console.log(imgloading.src)\r\n    // }\r\n    const triggerInput = () => input.click()\r\n    \r\n\r\n    //removeImgBtn.addEventListener('click', triggerImgBtn)\r\n    loadImgBtn.addEventListener('click', triggerInput)\r\n\r\n}\r\n","// require('es6-promise').polyfill();\r\n// import 'jquery';\r\n// import 'nodelist-foreach-polyfill';\r\n\r\n//import {loadImg} from './modules/loadImg';\r\nimport {buttonAdd} from './modules/buttonAdd';\r\nimport './modules/editImg'\r\n\r\n//loadImg();\r\nbuttonAdd(\"#myFileInput\", \"myImg\");\r\n\r\n\r\n"],"sourceRoot":""}